for {
    switch state {
    case state1:
        state = action1()
    case state2:
        state = action2()
    case state3:
        state = action3()
    }
}